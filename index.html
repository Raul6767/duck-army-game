<script>
function startJob(jobEmoji) {
    const gameArea = document.getElementById("gameArea");
    const timerText = document.getElementById("timerText");

    let rarity;
    let minSeconds;
    let maxSeconds;

    const roll = Math.random();

    // Decide rarity
    if (roll < 0.5) {
        rarity = "âŒ Bad";
        minSeconds = 0;
        maxSeconds = 180; // 0-3 min
    } 
    else if (roll < 0.85) {
        rarity = "â­ Rare";
        minSeconds = 240; 
        maxSeconds = 360; // 4-6 min
    } 
    else {
        rarity = "ðŸ”¥ OP";
        minSeconds = 420;
        maxSeconds = 600; // 7-10 min
    }

    const totalSeconds = Math.floor(Math.random() * (maxSeconds - minSeconds + 1)) + minSeconds;

    let timeLeft = totalSeconds;

    gameArea.innerHTML = `
        <div style="font-size:20px; margin-bottom:10px;">${rarity}</div>
        <div style="font-size:50px;">${jobEmoji}</div>
        <div id="countdown" style="font-size:25px; margin-top:10px;"></div>
    `;

    const countdownElement = document.getElementById("countdown");

    const timerInterval = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;

        const formattedTime =
            String(minutes).padStart(2, '0') +
            ":" +
            String(seconds).padStart(2, '0');

        countdownElement.innerHTML = formattedTime;

        timeLeft--;

        if (timeLeft < 0) {
            clearInterval(timerInterval);
            countdownElement.innerHTML = "âœ… Job Complete!";
        }

    }, 1000);
}
</script>
